<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>onScrollTest </title>
	<style>
		.output tr{
			height: 5em;
		}
	</style>
</head>
<body>
	<label>Delete todo ID: <input type="number"></label>

	<table class="output" border="1">

	</table>
	<script>
		let output = document.querySelector('.output');
		let inputNode = document.querySelector('[type="number"]');
		let deleteID;


		// let todosURL = './backend/data.txt'
		let todosURL = 'db.json';

		const ROWS_NUMBER = 3;

		// displayPage( ROWS_NUMBER, todos, output );
		function displayPage( rowsNumber, records, outputNode ) {
			let currentPage = 1;
			let lastPage = Math.ceil(records.lenght/rowsNumber);
			let currentRecords

			for (let i = currentPage; i <=lastPage ; i++) {

				// HW/TODO: make it work
				currentRecords.forEach(r => {
					outputNode.innerHTML +=`
						<tr>
							<td>${r.id}</td>
							<td>${r.title}</td>
						</tr>
					`
				});
			}



		}

		// get todos data from server
		fetch(todosURL)
		.then(function (r){
			return r.text();
		})
		.then(function (responseText){
			// do something with responseText
			console.log(`response text: ${responseText}`);
			let todos = JSON.parse(responseText);
			console.dir(todos);

			// display only 3 rows
			displayPage( ROWS_NUMBER, todos, output );

			// todos.forEach(todo => {
			// 	output.innerHTML +=`
			// 		<tr>
			// 			<td>${todo.id}</td>
			// 			<td>${todo.title}</td>
			// 		</tr>
			// 	`
			// });


		})

		window.addEventListener('scroll', function (event) {
			// console.dir(event);
			window.onscroll = function(ev) {
			if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
				console.log(`END`);
			}
		};
		})
	</script>
</body>
</html>